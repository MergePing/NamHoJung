<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì‹œíŒ</title>
    <link rel="stylesheet" th:href="@{/css/reset.css}">

    <link rel="stylesheet" th:href="@{/css/post/post-dark.css}">
    <link rel="stylesheet" th:href="@{/css/mypage/mypageactive.css}">
    <link rel="stylesheet" th:href="@{/css/mypage/mypage-dark.css}">
    <style>
        /*ì†ì „ë“±*/
        /*:root {*/
        /*    --cursorX: 70vw;*/
        /*    --cursorY: 70vh;*/
        /*}*/
        /*:root:before {*/
        /*    content: '';*/
        /*    display: block;*/
        /*    width: 100%;*/
        /*    height: 100%;*/
        /*    position: fixed;*/
        /*    pointer-events: none;*/
        /*    z-index: 999999;*/
        /*    background: radial-gradient(*/
        /*            circle 15vmax at var(--cursorX) var(--cursorY),*/
        /*            rgba(0,0,0,0) 0%,*/
        /*            rgba(0,0,0,.5) 80%,*/
        /*            rgba(0,0,0,.95) 100%)*/
        /*}*/

        /** {*/
        /*    box-sizing: border-box;*/
        /*    text-rendering: optimizeLegibility;*/
        /*    -webkit-font-smoothing: antialiased;*/
        /*    -moz-osx-font-smoothing: grayscale;*/
        /*    font-kerning: auto;*/
        /*}*/
    </style>
</head>
<body>

<header>

    <nav>
        <!--ë„¤ë¹„ë°”-->
        <img th:src="@{/images/main/nav-logo-dark.png}" alt="ìƒë‹¨ ë¡œê³ " onclick="location.href='/'">
        <span onclick="location.href='/intro'">ì†Œê°œ</span>
        <span onclick="location.href='/notice'">ê³µì§€ì‚¬í•­</span>
        <span onclick="location.href='/post'">ê²Œì‹œíŒ</span>
        <span onclick="location.href='/mbti'">MBTI ê²€ì‚¬</span>
        <span id="mypageBtn">ë§ˆì´í˜ì´ì§€</span>
        <form th:action="@{/auth/logout}" method="post">
            <button id="logoutNav" type="submit">ë¡œê·¸ì•„ì›ƒ</button>
        </form>
        <span onclick="location.href='/auth/signupterms'">íšŒì›ê°€ì…</span>
    </nav>

</header>

<aside id="myPageAside">
    <img th:src="@{${userInfo.profileImage != null ? userInfo.profileImage : '/images/mypageimages/profile.png'}}" alt="í”„ë¡œí•„ ì‚¬ì§„" class="profile-photo" id="profilePhoto">
    <p id="nickname" class="nicknamefont">ë‹‰ë„¤ì„ : <span th:text="${myPageDTO.userName}"></span></p>
    <p id="rank" class="rankfont">ë“±ê¸‰: <span th:text="${userLevel}"></span></p>
    <p class="infofont" id="info">ê°œì¸ ì •ë³´</p>
    <p class="activefont" id="active">í™œë™ ê¸°ë¡</p>
    <p class="MBTIfont" id="mbtiButton">MBTI</p>
    <div id="mbtiContent" style="display: none;">
        <div id="myMBTI" class="mbti-item">
            -- ë‚˜ì˜ MBTI
        </div>
        <div class="mbti-item2" onclick="location.href='/mbti'">-- MBTI ê²€ì‚¬</div>
    </div>
    <form th:action="@{/auth/logout}" method="post">
        <button class="logoutFont" type="submit">ë¡œê·¸ì•„ì›ƒ</button>
    </form>
</aside>
<div class="rankpopup" id="rank-popup">
    <p class="scorefont">ì¶œì„ íšŸìˆ˜ : <span th:text="${attendanceCount}"></span></p>
    <p class="nextfont">ë‹¤ìŒ ë“±ê¸‰ : <span th:text="${nextLevelName}"></span></p>
    <p class="needfont">í•„ìš” ì¶œì„ : <span th:text="${nextLevelRequiredAttendance}"></span></p>
</div>

<div class="modal-background" id="modal-background">
    <div class="pwdpopup" id="pwd-popup">
        <p class="pwdfont">ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ ë³¸ì¸ì„ì„ í™•ì¸í•´ ì£¼ì„¸ìš”!</p>
        <div class="pwd-container">
            <span class="pwdfont2">ë¹„ë°€ë²ˆí˜¸</span> <input type="password" id="pwdInput" placeholder="ì˜ë¬¸,ìˆ«ì,íŠ¹ìˆ˜ë¬¸ì 8~12ìë¦¬">
            <span class="toggle-password" id="togglePassword"><img id="passwordIcon" src="/images/icon/closeEye.png" alt="eye-icon" /></span>
        </div>

        <div class="popup-buttons">
            <button id="closePopupBtn" class="cancle-btn">ì·¨ì†Œ</button>
            <button id="submitPasswordBtn" class="confirm-btn">í™•ì¸</button>
        </div>

    </div>
</div>
<div class="mbtipopup" id="mbtiPopup">
    <p class="horrormbti">ë‚˜ì˜ ê³µí¬ MBTI</p>
    <p class="mbticategory" th:text="${mbtiInfo.MBTI_TYPE}"></p>
    <div class="mbtiexp">
        <p class="mtbtiexp2" th:text="${mbtiInfo.MBTI_INFO}"></p>
    </div>
</div>


<main>
    <div class="qickBtn">
        <!--í”Œë¡œíŒ… ë²„íŠ¼-->
        <img th:src="@{/images/notice/folating-btn-dark.png}" id="light" class="tr" alt="í”Œë¡œíŒ… ë²„íŠ¼">
        <img th:src="@{/images/notice/folating-btn-click-dark.png}" class="dn tr" id="dark" alt="í”Œë¡œíŒ… ë²„íŠ¼ í´ë¦­">
        <div class="clikbtn tr">
            <img th:src="@{/images/notice/top-btn-dark.png}" class="dn" id="top" alt="íƒ‘ë²„íŠ¼">
            <img th:src="@{/images/notice/light-btn-dark.png}" class="dn" id="mode" alt="í…Œë§ˆ ë³€ê²½">
            <img th:src="@{/images/notice/test-btn-dark.png}" class="dn" id="test" alt="MBTI í…ŒìŠ¤íŠ¸">
        </div>
    </div>

    <img th:src="@{/images/post/post-bg-dark.png}" id="bg">

    <div class="write1" id="write1">
        <p>ì‘ì„±í•œ ê²Œì‹œê¸€</p>
    </div>

    <div class="write2" id="write2">
        <p>ì‘ì„±í•œ ëŒ“ê¸€</p>
    </div>

    <div class="write3" id="write3">
        <p>ì¦ê²¨ì°¾ê¸°</p>
    </div>

    <input type="search" value="&nbsp; &nbsp; &nbsp;ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
    <label><img th:src="@{/images/post/Search-dark.png}"></label>


    <div class="sell" id="sellPostsContent">
        <span>ë²ˆí˜¸</span>
        <span>ì¦ê²¨ì°¾ê¸°</span>
        <span>ê²Œì‹œë¬¼ ì œëª©</span>
        <span>ì¹´í…Œê³ ë¦¬</span>
        <span>ë“±ë¡ë‚ ì§œ</span>
        <span>ë¬´ì„œì›Œìš”</span>
        <span>ëŒ“ê¸€</span>
    </div>

    <div class="sell2" id="sellCommentsContent" style="display: none;">
        <span>ë²ˆí˜¸</span>
        <span>ëŒ“ê¸€ ë‚´ìš©</span>
        <span>ë“±ë¡ë‚ ì§œ</span>
        <span>ì¢‹ì•„ìš”</span>
    </div>

    <div class="sell" id="sellFavoriteContent" style="display: none;">
        <span>ë²ˆí˜¸</span>
        <span>ì¦ê²¨ì°¾ê¸°</span>
        <span>ê²Œì‹œê¸€ ì œëª©</span>
        <span>ì¹´í…Œê³ ë¦¬</span>
        <span>ë“±ë¡ë‚ ì§œ</span>
        <span>ë¬´ì„œì›Œìš”</span>
        <span>ëŒ“ê¸€</span>
    </div>


    <div id="postContainer" class="myp">
        <div  id="postsContent"  class="myp2" th:each="post : ${writtenPostList}">
            <span class="postno" th:text="${post.postNo}"></span>
            <span>
                <img th:if="${post.postFavorite == true}" th:src="@{/images/post/best-dark.png}" alt="ì¦ê²¨ì°¾ê¸° ì´ë¯¸ì§€">
                <img th:unless="${post.postFavorite == true}" th:src="@{/images/post/best-none-dark.png}" alt="ì¦ê²¨ì°¾ê¸° ì—†ìŒ ì´ë¯¸ì§€">
            </span>
            <span class="posttitle" th:text="${post.postTitle}"></span>
            <span class="postct2" th:text="${post.postCategory}"></span>
            <span th:text="${post.postDate}"></span>
            <span th:text="${post.scaryNumber}"></span>
            <span th:text="${post.commentsNumber}"></span>
        </div>
    </div>

    <!-- í˜ì´ì§• ë²„íŠ¼ ì˜ì—­ -->
    <div id="postPagination" class="postPagination">
        <button onclick="changePage(currentPage - 1)" id="postPrevButton">ì´ì „</button>
        <span id="PostPageNumbers"></span>
        <button onclick="changePage(currentPage + 1)" id="postNextButton">ë‹¤ìŒ</button>
    </div>

    <div id="commentContainer">
        <div id="commentsContent" class="comment" style="display: none;" th:each="comment : ${writtenCommentList}" >
                <span th:text ="${comment.commentNo}"></span>
                <span th:text="${comment.commentContent}"> </span>
                <span th:text="${comment.commentDate}"></span>
                <span>323</span>
        </div>
    </div>

    <!-- í˜ì´ì§• ë²„íŠ¼ ì˜ì—­ -->
    <div id="commentPagination" class="commentPagination">
        <button onclick="commentChangePage(currentPage - 1)" id="commentPrevButton">ì´ì „</button>
        <span id="commentPageNumbers"></span>
        <button onclick="commentChangePage(currentPage + 1)" id="commentNextButton">ë‹¤ìŒ</button>
    </div>

    <div id="favoriteContainer" class="myp">
        <div id="favoritesContent" class="myp2" style="display: none;" th:each="post2 : ${writtenFavoriteList}">
            <span th:text ="${post2.postNo}"></span>
            <span>
                <img th:src="@{/images/post/best-dark.png}" th:if="${post2.postFavorite}"
                     th:attr="data-postNo=${post2.postNo}" class="favorite-icon" onclick="toggleFavorite(this)">
            <img th:src="@{/images/post/best-none-dark.png}" th:unless="${post2.postFavorite}"
                 th:attr="data-postNo=${post2.postNo}" class="favorite-icon" onclick="toggleFavorite(this)">
            </span>
            <span th:text="${post2.postTitle}"></span>
            <span th:text="${post2.postCategory}"></span>
            <span th:text="${post2.postDate}"></span>
            <span th:text="${post2.scaryNumber}"></span>
            <span th:text="${post2.commentsNumber}"></span>
        </div>
    </div>
    <!-- í˜ì´ì§• ë²„íŠ¼ ì˜ì—­ -->
    <div id="favoritePagination" class="favoritePagination">
        <button onclick="favoriteChangePage(currentPage - 1)" id="favoritePrevButton">ì´ì „</button>
        <span id="favoritePageNumbers"></span>
        <button onclick="favoriteChangePage(currentPage + 1)" id="favoriteNextButton">ë‹¤ìŒ</button>
    </div>



</main>

<footer>
    <div class="footer"><p>â“’ 2024 MergePing. All right reserved.  </p></div>
</footer>
</body>


<script>

        // ë²„íŠ¼ê³¼ ì½˜í…ì¸  ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const write1 = document.getElementById("write1");
        const write2 = document.getElementById("write2");
        const write3 = document.getElementById("write3");

        const sellPostsContent = document.getElementById("sellPostsContent");
        const sellCommentsContent = document.getElementById("sellCommentsContent");
        const sellFavoriteContent = document.getElementById("sellFavoriteContent");

        const postsContent = document.getElementById("postsContent");
        const commentsContent = document.querySelectorAll('.comment');
        const favoritesContent = document.getElementById("favoritesContent");


        const postPagination = document.getElementById('postPagination');
        const commentPagination = document.getElementById('commentPagination');
        const favoritePagination = document.getElementById('favoritePagination');


        // ë²„íŠ¼ ìƒ‰ ì´ˆê¸°í™” í•¨ìˆ˜
        function resetButtonStyles() {
            write1.classList.remove("active");
            write2.classList.remove("active");
            write3.classList.remove("active");
        }

        // ì½˜í…ì¸  ì´ˆê¸°í™” í•¨ìˆ˜
        function resetContent() {
            if (sellPostsContent) sellPostsContent.style.display = "none";
            if (sellCommentsContent) sellCommentsContent.style.display = "none";
            if (sellFavoriteContent) sellFavoriteContent.style.display = "none";

            if (postPagination) postPagination.style.display="none";
            if (commentPagination) commentPagination.style.display="none";
            if (favoritePagination) favoritePagination.style.display="none";

            if (postsContent) postsContent.innerHTML = "";  // ì´ì „ ê²Œì‹œê¸€ë“¤ ì´ˆê¸°í™”
            // ëŒ“ê¸€ë“¤ì„ í•˜ë‚˜ì”© ìˆ¨ê¸°ê¸°
            if (commentsContent) {
                commentsContent.forEach(comment => {
                    comment.style.display = "none";
                });
            }
            if (favoritesContent) favoritesContent.innerHTML = "";   // ì´ì „ ì¦ê²¨ì°¾ê¸°ë“¤ ì´ˆê¸°í™”


            // ë™ì ìœ¼ë¡œ ì¶”ê°€ëœ ìš”ì†Œë“¤ì„ ëª¨ë‘ ì‚­ì œ
            const postContainer = document.getElementById('postContainer');
            if (postContainer) {
                postContainer.innerHTML = ""; // ì¶”ê°€ëœ ê²Œì‹œê¸€ì„ ëª¨ë‘ ì œê±°
            }
            const commentContainer = document.getElementById('commentContainer');
            if (commentContainer) {
                commentContainer.innerHTML = ""; // ì¶”ê°€ëœ ëŒ“ê¸€ì„ ëª¨ë‘ ì œê±°
            }
            const favoriteContainer = document.getElementById('favoriteContainer');
            if (favoriteContainer) {
                favoriteContainer.innerHTML = ""; // ì¶”ê°€ëœ ì¦ê²¨ì°¾ê¸°ë¥¼ ëª¨ë‘ ì œê±°
            }
        }

        // ê²Œì‹œê¸€ ì´ˆê¸°í™” í•¨ìˆ˜
        function resetPostsContent() {
            if (postsContent) postsContent.innerHTML = ""; // ê²Œì‹œê¸€ ì´ˆê¸°í™”
            const postContainer = document.getElementById('postContainer');
            if (postContainer) {
                postContainer.innerHTML = ""; // ì¶”ê°€ëœ ê²Œì‹œê¸€ ì œê±°
            }
        }
        function resetCommentContent() {
            if (commentsContent) {
                commentsContent.forEach(comment => {
                    comment.style.display = "none";
                });
            }
            const commentContainer = document.getElementById('commentContainer');
            if (commentContainer) {
                commentContainer.innerHTML = ""; // ì¶”ê°€ëœ ëŒ“ê¸€ì„ ëª¨ë‘ ì œê±°
            }
        }

        function resetFavoriteContent() {
            if (favoritesContent) favoritesContent.innerHTML = "";
            const favoriteContainer = document.getElementById('favoriteContainer');
            if (favoriteContainer) {
                favoriteContainer.innerHTML = ""; // ì¶”ê°€ëœ ì¦ê²¨ì°¾ê¸°ë¥¼ ëª¨ë‘ ì œê±°
            }
        }
        // ê²Œì‹œê¸€ ì¶”ê°€ í•¨ìˆ˜
        function addNewPost(post, index) {
            const postContainer = document.getElementById('postContainer');
            const newPost = document.createElement('div');
            // í¬ì§€ì…˜ì„ relativeë¡œ ì„¤ì •í•˜ì—¬ ìì‹ ìš”ì†Œë“¤ì´ ì ˆëŒ€ ìœ„ì¹˜ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
            postContainer.style.position = 'relative';

            newPost.classList.add('post');
            newPost.setAttribute('style', `top: ${index * 80}px`);
            newPost.innerHTML = `
                <span>${post.postNo}</span>
                <span>
                   <img src="/images/post/best-${post.postFavorite ? 'dark' : 'none-dark'}.png"
                data-postNo="${post.postNo}" class="favorite-icon" >
                </span>
                <a href="/selectpost/${post.postNo}">
                    <span>${post.postTitle}</span>
                </a>
                <div><span>${post.postCategory}</span></div>
                <span>${post.postDate}</span>
                <span>${post.scaryNumber}</span>
                <span>${post.commentsNumber}</span>
    `;
            postContainer.appendChild(newPost);
        }

        // ëŒ“ê¸€ ì¶”ê°€ í•¨ìˆ˜
        function addNewComment(comment, index) {
            const commentContainer = document.getElementById('commentContainer');
            const newComment = document.createElement('div');
            newComment.classList.add('comment');
            newComment.setAttribute('style', `top: ${index * 80}px`);
            newComment.innerHTML = `
                <span>${comment.commentNo}</span>
                <a href="/selectpost/${comment.postNo}">
                    <span>${comment.commentContent}</span>
                </a>
                <span>${comment.commentDate}</span>
                <span>${comment.likeNumber}</span>
    `;
            commentContainer.appendChild(newComment);
        }

        // ì¦ê²¨ì°¾ê¸° ì¶”ê°€ í•¨ìˆ˜
        function addNewFavorite(post, index) {
            const favoriteContainer = document.getElementById('favoriteContainer');
            const newFavorite = document.createElement('div');
            newFavorite.classList.add('post');
            newFavorite.setAttribute('style', `top: ${index * 80}px`);
            newFavorite.innerHTML = `
        <span>${post.postNo}</span>
        <span>
            <img src="/images/post/best-${post.postFavorite ? 'dark' : 'none-dark'}.png"
                data-postNo="${post.postNo}" class="favorite-icon" onclick="toggleFavorite(this)">
        </span>
        <a href="/selectpost/${post.postNo}">
            <span>${post.postTitle}</span>
        </a>
        <div><span>${post.postCategory}</span></div>
        <span>${post.postDate}</span>
        <span>${post.scaryNumber}</span>
        <span>${post.commentsNumber}</span>
    `;
            favoriteContainer.appendChild(newFavorite);
        }
        let currentPage = 1; // í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸
        const pageSize = 7;  // í˜ì´ì§€ë‹¹ ê²Œì‹œê¸€ ìˆ˜

        // ê²Œì‹œê¸€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
        function fetchPosts(page = 1) {
            fetch(`/getPosts?page=${page}&size=${pageSize}`)
                .then(response => response.json())
                .then(data => {
                    const posts = data.writtenPostList;
                    const totalPostCount = data.totalPostCount;

                    resetPostsContent();
                    if (Array.isArray(posts) && posts.length > 0) {
                        posts.forEach((post, index) => addNewPost(post, index));
                        currentPage = page;
                        updatePagination(totalPostCount); // ì´ ê²Œì‹œê¸€ ê°œìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜ì´ì§• ì—…ë°ì´íŠ¸
                    } else {
                        console.error("ë” ì´ìƒ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
                    }
                })
                .catch(error => console.error("ì—ëŸ¬ ë°œìƒ:", error));
        }

        // í˜ì´ì§€ ë²„íŠ¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updatePagination(totalPostCount) {
            const pageNumbers = document.getElementById("PostPageNumbers");
            const totalPages = Math.ceil(totalPostCount / pageSize);

            pageNumbers.innerHTML = ""; // í˜ì´ì§€ ë²ˆí˜¸ ì´ˆê¸°í™”

            // í˜ì´ì§€ ë²ˆí˜¸ ìƒì„±
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement("button");
                pageButton.textContent = i;
                pageButton.onclick = () => changePage(i);
                if (i === currentPage) {
                    pageButton.classList.add("active"); // í˜„ì¬ í˜ì´ì§€ ê°•ì¡°
                }
                pageNumbers.appendChild(pageButton);
            }

            // ì´ì „, ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            document.getElementById("postPrevButton").disabled = currentPage === 1;
            document.getElementById("postNextButton").disabled = currentPage === totalPages;
        }

        // í˜ì´ì§€ ë³€ê²½ í•¨ìˆ˜
        function changePage(newPage) {
            if (newPage < 1) return; // ì²« í˜ì´ì§€ë³´ë‹¤ ì‘ì„ ìˆ˜ ì—†ìŒ

            // ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ê¸° ì „ì— ê¸°ì¡´ active í´ë˜ìŠ¤ ì œê±°
            const allPageButtons = document.querySelectorAll("#PostPageNumbers button");
            allPageButtons.forEach(button => {
                button.classList.remove("active");
            });

            fetchPosts(newPage);
        }


        function fetchComments(page = 1) {
            fetch(`/getComments?page=${page}&size=${pageSize}`)
                .then(response => response.json())
                .then(data => {
                    const comments = data.writtenCommentList;
                    const totalCommentCount = data.totalCommentCount;

                    resetCommentContent();
                    if (Array.isArray(comments) && comments.length > 0) {
                        comments.forEach((comment,index) => addNewComment(comment,index));
                        currentPage = page;
                        commentUpdatePagination(totalCommentCount); // ì´ ê²Œì‹œê¸€ ê°œìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í˜ì´ì§• ì—…ë°ì´íŠ¸
                    } else {
                        console.error("ë” ì´ìƒ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.");
                    }
                })
                .catch(error => console.error("ì—ëŸ¬ ë°œìƒ:", error)); // ì—ëŸ¬ ì²˜ë¦¬
        }

        // í˜ì´ì§€ ë²„íŠ¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function commentUpdatePagination(totalCommentCount) {
            const pageNumbers = document.getElementById("commentPageNumbers");
            const totalPages = Math.ceil(totalCommentCount / pageSize);

            pageNumbers.innerHTML = ""; // í˜ì´ì§€ ë²ˆí˜¸ ì´ˆê¸°í™”

            // í˜ì´ì§€ ë²ˆí˜¸ ìƒì„±
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement("button");
                pageButton.textContent = i;
                pageButton.onclick = () => commentChangePage(i);
                if (i === currentPage) {
                    pageButton.classList.add("active"); // í˜„ì¬ í˜ì´ì§€ ê°•ì¡°
                }
                pageNumbers.appendChild(pageButton);
            }

            // ì´ì „, ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            document.getElementById("commentPrevButton").disabled = currentPage === 1;
            document.getElementById("commentNextButton").disabled = currentPage === totalPages;
        }

        // í˜ì´ì§€ ë³€ê²½ í•¨ìˆ˜
        function commentChangePage(newPage) {
            if (newPage < 1) return; // ì²« í˜ì´ì§€ë³´ë‹¤ ì‘ì„ ìˆ˜ ì—†ìŒ
            fetchComments(newPage);
        }

        function fetchFavorites(page = 1) {
            fetch(`/getFavorites?page=${page}&size=${pageSize}`)
                .then(response => response.json())
                .then(data => {
                    const favorites = data.writtenFavoriteList;
                    const totalFavoriteCount = data.totalFavoriteCount;

                    resetFavoriteContent();
                    if (Array.isArray(favorites)) {
                        favorites.forEach((favorite,index) => addNewFavorite(favorite,index));
                        currentPage = page;
                        favoriteUpdatePagination(totalFavoriteCount);
                    } else {
                        console.error("ì˜ëª»ëœ ë°ì´í„° í˜•ì‹:", favorites);
                    }
                })
                .catch(error => console.error("ì—ëŸ¬ ë°œìƒ:", error)); // ì—ëŸ¬ ì²˜ë¦¬
        }
        function favoriteUpdatePagination(totalFavoriteCount) {
            const pageNumbers = document.getElementById("favoritePageNumbers");
            const totalPages = Math.ceil(totalFavoriteCount / pageSize);

            pageNumbers.innerHTML = ""; // í˜ì´ì§€ ë²ˆí˜¸ ì´ˆê¸°í™”

            // í˜ì´ì§€ ë²ˆí˜¸ ìƒì„±
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement("button");
                pageButton.textContent = i;
                pageButton.onclick = () => favoriteChangePage(i);
                if (i === currentPage) {
                    pageButton.classList.add("active"); // í˜„ì¬ í˜ì´ì§€ ê°•ì¡°
                }
                pageNumbers.appendChild(pageButton);
            }

            // ì´ì „, ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            document.getElementById("favoritePrevButton").disabled = currentPage === 1;
            document.getElementById("favoriteNextButton").disabled = currentPage === totalPages;
        }

        // í˜ì´ì§€ ë³€ê²½ í•¨ìˆ˜
        function favoriteChangePage(newPage) {
            if (newPage < 1) return; // ì²« í˜ì´ì§€ë³´ë‹¤ ì‘ì„ ìˆ˜ ì—†ìŒ
            fetchFavorites(newPage);
        }


        // ì‘ì„±í•œ ê²Œì‹œê¸€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        write1.addEventListener("click", function () {
            resetButtonStyles();
            resetContent();

            write1.classList.add("active"); // ë²„íŠ¼ ìƒ‰ ë³€ê²½
            if (sellPostsContent) sellPostsContent.style.display = "block";
            if (postsContent) postsContent.style.display = "block";
            if (postPagination) postPagination.style.display="block";
            fetchPosts(1);
        });

        // ì‘ì„±í•œ ëŒ“ê¸€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        write2.addEventListener("click", function () {
            resetButtonStyles();
            resetContent();

            write2.classList.add("active"); // ë²„íŠ¼ ìƒ‰ ë³€ê²½
            if (sellCommentsContent) sellCommentsContent.style.display = "block";
            if (commentsContent) {
                commentsContent.forEach(comment => {
                    comment.style.display = "block";  // ê° ëŒ“ê¸€ì„ í‘œì‹œ

                });

            }
            if (commentPagination) commentPagination.style.display="block";
            fetchComments(1);
        });

        // ì¦ê²¨ì°¾ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        write3.addEventListener("click", function () {
            resetButtonStyles();
            resetContent();

            write3.classList.add("active"); // ë²„íŠ¼ ìƒ‰ ë³€ê²½
            if (sellFavoriteContent) sellFavoriteContent.style.display = "block";
            if (favoritesContent) favoritesContent.style.display = "block";
            if (favoritePagination) favoritePagination.style.display="block";

            fetchFavorites(1);
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ìœ¼ë¡œ 'ì‘ì„±í•œ ê²Œì‹œê¸€'ì´ ë³´ì´ë„ë¡ ì„¤ì •
        write1.click();





</script>

<script>
    function toggleFavorite(element) {
        const postNo = element.getAttribute('data-postNo');
        const isFavorite = element.getAttribute('src').includes('best-dark.png'); // í˜„ì¬ ì¦ê²¨ì°¾ê¸° ìƒíƒœ í™•ì¸

        // ì¦ê²¨ì°¾ê¸° ìƒíƒœë¥¼ í† ê¸€í•˜ê¸° ìœ„í•œ ì„œë²„ ìš”ì²­
        fetch(`/toggleFavorite`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ postNo: postNo, isFavorite: !isFavorite })
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // ì¦ê²¨ì°¾ê¸° ìƒíƒœê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìœ¼ë©´ ì•„ì´ì½˜ì˜ srcë¥¼ ë³€ê²½
                    element.src = isFavorite
                        ? '/images/post/best-none-dark.png'
                        : '/images/post/best-dark.png';

                    // ì¦ê²¨ì°¾ê¸° í™œì„±í™”ëœ ê²½ìš° (ì•„ì´ì½˜ì´ 'best-dark.png'ì¼ ë•Œ)
                    if (isFavorite) {
                        // í•´ë‹¹ ê²Œì‹œê¸€ì„ ì°¾ê³ , DOMì—ì„œ ì œê±°
                        const postElement = element.closest('.post'); // .post í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ìš”ì†Œ ì°¾ê¸°
                        postElement.remove(); // í•´ë‹¹ ìš”ì†Œ ì œê±°
                    }
                } else {
                    console.log('ì¦ê²¨ì°¾ê¸° ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>

<script>

    // const write1 = document.getElementById('write1');
    // const write2 = document.getElementById('write2');
    // const write3 = document.getElementById('write3');
    // const sellPostsContent = document.getElementById('sellPostsContent');
    // const sellCommentsContent = document.getElementById('sellCommentsContent');
    // const sellFavoriteContent = document.getElementById('sellFavoriteContent');
    // const postsContent = document.getElementById('postsContent');
    // const commentsContent = document.getElementById('commentsContent');
    // const favoritesContent = document.getElementById('favoritesContent');
    // const postsPagination = document.getElementById('postsPagination');
    // const commentsPagination = document.getElementById('commentsPagination');
    // const favoritesPagination = document.getElementById('favoritesPagination');
    // // íƒ­ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    // const tab1 = document.getElementById("tab1");
    // const tab2 = document.getElementById("tab2");
    // const post1 = document.querySelectorAll(".post1");
    // const post2 = document.querySelectorAll(".post2");
    //
    // const commentTab1 = document.getElementById("commenttab1");
    // const commentTab2 = document.getElementById("commenttab2");
    //
    // const favoriteTab1 = document.getElementById("favoritetab1");
    // const favoriteTab2 = document.getElementById("favoritetab2");
    //
    // function resetButtonStyles() {
    //     write1.classList.remove('active');
    //     write2.classList.remove('active');
    //     write3.classList.remove('active');
    // }
    // function resetPagination() {
    //     postsPagination.style.display = 'none';
    //     commentsPagination.style.display = 'none';
    //     favoritesPagination.style.display = 'none';
    // }
    // // íƒ­ ìƒíƒœ ì´ˆê¸°í™”
    // function resetTabStyles() {
    //     // ê²Œì‹œê¸€ ì²« í˜ì´ì§€ë¡œ ì´ˆê¸°í™”
    //     post1.forEach(click => click.classList.remove("dn"));
    //     post2.forEach(click => click.classList.add("dn"));
    //     tab1.style.color = "#fff";
    //     tab2.style.color = "#BEBEBE";
    //
    //     // ëŒ“ê¸€ ì²« í˜ì´ì§€ë¡œ ì´ˆê¸°í™”
    //     document.getElementById('commentsContent').style.display = 'block';
    //     document.getElementById('commentsContent2').style.display = 'none';
    //     commentTab1.style.color = "#fff";
    //     commentTab2.style.color = "#BEBEBE";
    //
    //     // ì¦ê²¨ì°¾ê¸° ì²« í˜ì´ì§€ë¡œ ì´ˆê¸°í™”
    //     document.getElementById('favoritesContent').style.display = 'block';
    //     document.getElementById('favoritesContent2').style.display = 'none';
    //     favoriteTab1.style.color = "#fff";
    //     favoriteTab2.style.color = "#BEBEBE";
    // }
    //
    //
    // write1.addEventListener('click', function() {
    //     resetButtonStyles();
    //     resetPagination();
    //     resetTabStyles();
    //     write1.classList.add('active');
    //
    //     // ì‘ì„±í•œ ê²Œì‹œê¸€ ì„¤ì •
    //     sellPostsContent.style.display = 'block';
    //     sellCommentsContent.style.display = 'none';
    //     sellFavoriteContent.style.display = 'none';
    //
    //     postsContent.style.display = 'block';
    //     commentsContent.style.display = 'none';
    //     favoritesContent.style.display = 'none';
    //
    //     // ì‘ì„±í•œ ê²Œì‹œê¸€ì˜ í˜ì´ì§€ ë„˜ë²„ í‘œì‹œ
    //     postsPagination.style.display = 'flex';
    //
    // });
    //
    // write2.addEventListener('click', function() {
    //     resetButtonStyles();
    //     resetPagination();
    //     resetTabStyles();
    //     write2.classList.add('active');
    //
    //     // ì‘ì„±í•œ ëŒ“ê¸€ ì„¤ì •
    //     sellPostsContent.style.display = 'none';
    //     sellCommentsContent.style.display = 'block';
    //     sellFavoriteContent.style.display = 'none';
    //
    //     postsContent.style.display = 'none';
    //     commentsContent.style.display = 'block';
    //     favoritesContent.style.display = 'none';
    //
    //     // ì‘ì„±í•œ ëŒ“ê¸€ì˜ í˜ì´ì§€ ë„˜ë²„ í‘œì‹œ
    //     commentsPagination.style.display = 'flex';
    // });
    //
    //
    // write3.addEventListener('click', function() {
    //     resetButtonStyles();
    //     resetPagination();
    //     resetTabStyles();
    //     write3.classList.add('active');
    //
    //     // ì¦ê²¨ì°¾ê¸° ì„¤ì •
    //     sellPostsContent.style.display = 'none';
    //     sellCommentsContent.style.display = 'none';
    //     sellFavoriteContent.style.display = 'block';
    //
    //     postsContent.style.display = 'none';
    //     commentsContent.style.display = 'none';
    //     favoritesContent.style.display = 'block';
    //
    //     // ì¦ê²¨ì°¾ê¸°ì˜ í˜ì´ì§€ ë„˜ë²„ í‘œì‹œ
    //     favoritesPagination.style.display = 'flex';
    // });
    // // ì‘ì„±í•œ ê²Œì‹œê¸€ í˜ì´ì§€ ì „í™˜
    //
    // tab1.addEventListener('click', () => {
    //     post1.forEach(click => click.classList.remove("dn"));
    //     post2.forEach(click => click.classList.add("dn"));
    //     tab1.style.color = "#fff";
    //     tab2.style.color = "#BEBEBE";
    // });
    //
    // tab2.addEventListener('click', () => {
    //     post2.forEach(click => click.classList.remove("dn"));
    //     post1.forEach(click => click.classList.add("dn"));
    //     tab2.style.color = "#fff";
    //     tab1.style.color = "#BEBEBE";
    // });
    //
    // // ì‘ì„±í•œ ëŒ“ê¸€ í˜ì´ì§€ ì „í™˜
    //
    // commentTab1.addEventListener('click', () => {
    //     document.getElementById('commentsContent').style.display = 'block';
    //     document.getElementById('commentsContent2').style.display = 'none';
    //     commentTab1.style.color = "#fff";
    //     commentTab2.style.color = "#BEBEBE";
    // });
    //
    // commentTab2.addEventListener('click', () => {
    //     document.getElementById('commentsContent').style.display = 'none';
    //     document.getElementById('commentsContent2').style.display = 'block';
    //     commentTab2.style.color = "#fff";
    //     commentTab1.style.color = "#BEBEBE";
    // });
    //
    // // ì¦ê²¨ì°¾ê¸° í˜ì´ì§€ ì „í™˜
    // favoriteTab1.addEventListener('click', () => {
    //     document.getElementById('favoritesContent').style.display = 'block';
    //     document.getElementById('favoritesContent2').style.display = 'none';
    //     favoriteTab1.style.color = "#fff";
    //     favoriteTab2.style.color = "#BEBEBE";
    // });
    //
    // favoriteTab2.addEventListener('click', () => {
    //     document.getElementById('favoritesContent').style.display = 'none';
    //     document.getElementById('favoritesContent2').style.display = 'block';
    //     favoriteTab2.style.color = "#fff";
    //     favoriteTab1.style.color = "#BEBEBE";
    // });

    // JavaScriptë¡œ í† ê¸€ ê¸°ëŠ¥ ì¶”ê°€
    const mypageBtn = document.getElementById("mypageBtn");
    const myPageAside = document.getElementById("myPageAside");

    // ë²„íŠ¼ í´ë¦­ ì‹œ aside ì°½ í‘œì‹œ/ìˆ¨ê¹€ ì „í™˜
    mypageBtn.addEventListener("click", () => {
        if (myPageAside.classList.contains("show")) {
            // ë³´ì´ëŠ” ìƒíƒœë¼ë©´ ìˆ¨ê¸°ê¸°
            myPageAside.classList.remove("show");
            setTimeout(() => {
                myPageAside.style.display = "none"; // ì• ë‹ˆë©”ì´ì…˜ í›„ displayë¥¼ noneìœ¼ë¡œ
            }, 400); // transitionê³¼ ë™ì¼í•œ ì‹œê°„ ì„¤ì •
        } else {
            // ìˆ¨ê²¨ì§„ ìƒíƒœë¼ë©´ ë³´ì´ê²Œ í•˜ê¸°
            myPageAside.style.display = "block"; // ë¨¼ì € displayë¥¼ blockìœ¼ë¡œ ì„¤ì •
            setTimeout(() => {
                myPageAside.classList.add("show");
            }, 10); // ì•½ê°„ì˜ ì§€ì—° ì‹œê°„ í›„ì— show í´ë˜ìŠ¤ ì¶”ê°€
        }
    });

    const gradeElement = document.getElementById('rank');
    const popup = document.getElementById('rank-popup');

    gradeElement.addEventListener('mouseenter', () => {
        popup.style.display = 'block'; // íŒì—… í‘œì‹œ
    });

    gradeElement.addEventListener('mouseleave', () => {
        popup.style.display = 'none'; // íŒì—… ìˆ¨ê¸°ê¸°
    });

    const personalInfoBtn = document.getElementById('info');
    const passwordPopup = document.getElementById('pwd-popup');
    const closePopupBtn = document.getElementById('closePopupBtn');
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('pwdInput');
    const submitPasswordBtn = document.getElementById('submitPasswordBtn');
    const modal = document.querySelector('.modal-background');
    const passwordIcon = document.getElementById('passwordIcon');

    //ëª¨ë‹¬
    personalInfoBtn.addEventListener('click', () => {
        passwordPopup.style.display = 'block';// ë¹„ë°€ë²ˆí˜¸ íŒì—… í‘œì‹œ
        document.body.style.overflow = "hidden"; // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”
    });

    personalInfoBtn.addEventListener("click", () => {
        modal.style.display = "flex";
        if (modal.style.display === "flex") {
            closePopupBtn.addEventListener("click", () => {
                modal.style.display = "none";
                document.body.style.overflow = "auto"; // ìŠ¤í¬ë¡¤ ë‹¤ì‹œ í™œì„±í™”
            });
        }
    });


    // ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°/ìˆ¨ê¸°ê¸° í† ê¸€
    togglePassword.addEventListener('click', () => {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        passwordIcon.src = type === 'password' ? '/images/icon/closeEye.png' : '/images/icon/openEye.png';
    });


    submitPasswordBtn.addEventListener('click', () => {
        const inputPassword = passwordInput.value;

        // ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ìš”ì²­
        fetch('/verifyPassword', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams({ inputPassword })
        })
            .then(response => response.json())
            .then(isPasswordCorrect => {
                if (isPasswordCorrect) {
                    // ë¹„ë°€ë²ˆí˜¸ê°€ ë§ìœ¼ë©´ ê°œì¸ì •ë³´ í˜ì´ì§€ë¡œ ì´ë™
                    location.href = '/userinfo';
                } else {
                    // ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë¦¬ë©´ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
                    alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                }
            })
            .catch(error => {
                console.error('ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ìš”ì²­ ì‹¤íŒ¨:', error);
                alert('ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
    });

    const activebtn = document.getElementById('active');
    activebtn.addEventListener('click', () => {
        // URLì„ ì›í•˜ëŠ” ì£¼ì†Œë¡œ ë³€ê²½í•˜ì„¸ìš”
        location.href = '/useractive';
    });

    const mbtiButton = document.getElementById("mbtiButton");
    const mbtiContent = document.getElementById("mbtiContent");
    const myMBTI = document.getElementById("myMBTI");
    const mbtiPopup = document.getElementById("mbtiPopup");

    // MBTI ë²„íŠ¼ í´ë¦­ ì‹œ MBTI ì½˜í…ì¸  í‘œì‹œ
    mbtiButton.addEventListener("click", () => {
        // ì½˜í…ì¸  í‘œì‹œ ìƒíƒœë¥¼ í† ê¸€
        mbtiContent.style.display = mbtiContent.style.display === "none" ? "block" : "none";
    });

    // ë‚˜ì˜ MBTI ìš”ì†Œì— ë§ˆìš°ìŠ¤ ì˜¬ë ¸ì„ ë•Œ íŒì—… í‘œì‹œ
    myMBTI.addEventListener("mouseenter", () => {
        mbtiPopup.style.display = "block";
    });

    // ë‚˜ì˜ MBTI ìš”ì†Œì—ì„œ ë§ˆìš°ìŠ¤ ë‚˜ê°”ì„ ë•Œ íŒì—… ìˆ¨ê¸°ê¸°
    myMBTI.addEventListener("mouseleave", () => {
        mbtiPopup.style.display = "none";
    });

</script>

<!--<script>-->
<!--    const tab1 = document.getElementById("tab1");-->
<!--    const tab2 = document.getElementById("tab2");-->
<!--    const post1 = document.querySelectorAll(".post1");-->
<!--    const post2 = document.querySelectorAll(".post2");-->
<!--    const img1 = document.getElementById("img1");-->
<!--    const img2 = document.getElementById("img2");-->

<!--    tab1.addEventListener('click',()=>{-->
<!--        post1.forEach(click => click.classList.remove("dn"));-->
<!--        post2.forEach(click => click.classList.add("dn"));-->
<!--        tab1.style.color="#fff";-->
<!--        tab2.style.color="#BEBEBE";-->
<!--    });-->

<!--    img1.addEventListener('click',()=>{-->
<!--        post1.forEach(click => click.classList.remove("dn"));-->
<!--        post2.forEach(click => click.classList.add("dn"));-->
<!--        tab1.style.color="#fff";-->
<!--        tab2.style.color="#BEBEBE";-->
<!--    });-->

<!--    tab2.addEventListener('click',()=>{-->
<!--        post2.forEach(click => click.classList.remove("dn"));-->
<!--        post1.forEach(click => click.classList.add("dn"));-->
<!--        tab2.style.color="#fff";-->
<!--        tab1.style.color="#BEBEBE";-->
<!--    });-->

<!--    img2.addEventListener('click',()=>{-->
<!--        post2.forEach(click => click.classList.remove("dn"));-->
<!--        post1.forEach(click => click.classList.add("dn"));-->
<!--        tab2.style.color="#fff";-->
<!--        tab1.style.color="#BEBEBE";-->
<!--    });-->

<!--</script>-->

<script>
    const floatBtn1 = document.getElementById("light");
    const floatBtn2 = document.getElementById("dark");
    const qickMenu1 =document.getElementById("top");
    const qickMenu2 =document.getElementById("mode");
    const qickMenu3 =document.getElementById("test");

    <!--í”Œë¡œíŒ… ë²„íŠ¼ í´ë¦­ì‹œ í€µë©”ë‰´ display block-->
    floatBtn1.addEventListener('click',function (){
        floatBtn1.classList.toggle('dn');
        floatBtn2.classList.toggle('dn');
        qickMenu1.classList.toggle('dn');
        qickMenu2.classList.toggle('dn');
        qickMenu3.classList.toggle('dn');
    });


    <!--í”Œë¡œíŒ… ë²„íŠ¼ í´ë¦­ì‹œ í€µë©”ë‰´ display none-->
    floatBtn2.addEventListener('click',function (){
        floatBtn1.classList.toggle('dn');
        floatBtn2.classList.toggle('dn');
        qickMenu1.classList.toggle('dn');
        qickMenu2.classList.toggle('dn');
        qickMenu3.classList.toggle('dn');

    });

    <!--top ë²„íŠ¼ í´ë¦­ì‹œ í™”ë©´ ìƒë‹¨ì´ë™-->
    setTimeout(function() {
        qickMenu1.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    }, 3000);

</script>
<!--<script>-->
<!--    function update(e){-->
<!--        var x = e.clientX || e.touches[0].clientX-->
<!--        var y = e.clientY || e.touches[0].clientY-->

<!--        document.documentElement.style.setProperty('&#45;&#45;cursorX', x + 'px')-->
<!--        document.documentElement.style.setProperty('&#45;&#45;cursorY', y + 'px')}-->

<!--    document.addEventListener('mousemove',update)-->
<!--    document.addEventListener('touchmove',update)-->
<!--</script>-->


<script>
    // JavaScriptë¡œ í† ê¸€ ê¸°ëŠ¥ ì¶”ê°€
    const mypageBtn = document.getElementById("mypageBtn");
    const myPageAside = document.getElementById("myPageAside");

    // ë²„íŠ¼ í´ë¦­ ì‹œ aside ì°½ í‘œì‹œ/ìˆ¨ê¹€ ì „í™˜
    mypageBtn.addEventListener("click", () => {
        if (myPageAside.classList.contains("show")) {
            // ë³´ì´ëŠ” ìƒíƒœë¼ë©´ ìˆ¨ê¸°ê¸°
            myPageAside.classList.remove("show");
            setTimeout(() => {
                myPageAside.style.display = "none"; // ì• ë‹ˆë©”ì´ì…˜ í›„ displayë¥¼ noneìœ¼ë¡œ
            }, 400); // transitionê³¼ ë™ì¼í•œ ì‹œê°„ ì„¤ì •
        } else {
            // ìˆ¨ê²¨ì§„ ìƒíƒœë¼ë©´ ë³´ì´ê²Œ í•˜ê¸°
            myPageAside.style.display = "block"; // ë¨¼ì € displayë¥¼ blockìœ¼ë¡œ ì„¤ì •
            setTimeout(() => {
                myPageAside.classList.add("show");
            }, 10); // ì•½ê°„ì˜ ì§€ì—° ì‹œê°„ í›„ì— show í´ë˜ìŠ¤ ì¶”ê°€
        }
    });

    const gradeElement = document.getElementById('rank');
    const popup = document.getElementById('rank-popup');

    gradeElement.addEventListener('mouseenter', () => {
        popup.style.display = 'block'; // íŒì—… í‘œì‹œ
    });

    gradeElement.addEventListener('mouseleave', () => {
        popup.style.display = 'none'; // íŒì—… ìˆ¨ê¸°ê¸°
    });

    const personalInfoBtn = document.getElementById('info');
    const passwordPopup = document.getElementById('pwd-popup');
    const closePopupBtn = document.getElementById('closePopupBtn');
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('pwdInput');
    const submitPasswordBtn = document.getElementById('submitPasswordBtn');
    const modal = document.querySelector('.modal-background');

    //ëª¨ë‹¬
    personalInfoBtn.addEventListener('click', () => {
        passwordPopup.style.display = 'block';// ë¹„ë°€ë²ˆí˜¸ íŒì—… í‘œì‹œ
        document.body.style.overflow = "hidden"; // ìŠ¤í¬ë¡¤ ë¹„í™œì„±í™”
    });

    personalInfoBtn.addEventListener("click", ()=>{
        modal.style.display="flex";
        if (modal.style.display === "flex") {
            closePopupBtn.addEventListener("click", () => {
                modal.style.display = "none";
                document.body.style.overflow = "auto"; // ìŠ¤í¬ë¡¤ ë‹¤ì‹œ í™œì„±í™”
            });
        }
    });



    // ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°/ìˆ¨ê¸°ê¸° í† ê¸€
    togglePassword.addEventListener('click', () => {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        togglePassword.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ'; // ì•„ì´ì½˜ ë³€ê²½
    });
    // í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ë¥¸ URLë¡œ ì´ë™
    submitPasswordBtn.addEventListener('click', () => {
        // URLì„ ì›í•˜ëŠ” ì£¼ì†Œë¡œ ë³€ê²½í•˜ì„¸ìš”
        location.href = '/userinfo';
    });

    const activebtn = document.getElementById('active');
    activebtn.addEventListener('click', () => {
        // URLì„ ì›í•˜ëŠ” ì£¼ì†Œë¡œ ë³€ê²½í•˜ì„¸ìš”
        location.href = '/useractive';
    });


</script>
</html>